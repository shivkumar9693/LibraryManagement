{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Keshav Anand\\\\Desktop\\\\LibraryManagement-main\\\\frontend\\\\src\\\\pages\\\\admin\\\\AddBook.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from \"react\";\nimport { useAuth } from \"../../context/AuthContext\";\nimport { addBook } from \"../../api/books\";\nimport { useNavigate } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AddBook = () => {\n  _s();\n  const {\n    user,\n    authHeader\n  } = useAuth();\n  const navigate = useNavigate();\n  const [book, setBook] = useState({\n    title: \"\",\n    author: \"\",\n    description: \"\"\n  });\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(\"\");\n  const submit = async e => {\n    e.preventDefault();\n    setLoading(true);\n    setError(\"\");\n    if (!user || !authHeader) {\n      setError(\"Please login to add books\");\n      setLoading(false);\n      return;\n    }\n    try {\n      // Extract email and password from authHeader\n      const base64Credentials = authHeader.replace(\"Basic \", \"\");\n      const credentials = atob(base64Credentials);\n      const [email, password] = credentials.split(\":\");\n\n      // Get user ID from user object (we need to store it during login)\n      const userId = user.id || user.userId;\n      if (!userId) {\n        setError(\"User ID not found. Please login again.\");\n        setLoading(false);\n        return;\n      }\n      await addBook(userId, book, email, password);\n      navigate(\"/admin\");\n    } catch (err) {\n      setError(\"Failed to add book. Please try again.\");\n      console.error(err);\n    } finally {\n      setLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    onSubmit: submit,\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Add Book\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      placeholder: \"Title\",\n      onChange: e => setBook({\n        ...book,\n        title: e.target.value\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      placeholder: \"Author\",\n      onChange: e => setBook({\n        ...book,\n        author: e.target.value\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n      placeholder: \"Description\",\n      onChange: e => setBook({\n        ...book,\n        description: e.target.value\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      children: \"Add\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 53,\n    columnNumber: 9\n  }, this);\n};\n_s(AddBook, \"2ls2o5vymnIae/YeLJqRLQNfi3U=\", false, function () {\n  return [useAuth, useNavigate];\n});\n_c = AddBook;\nexport default AddBook;\nvar _c;\n$RefreshReg$(_c, \"AddBook\");","map":{"version":3,"names":["React","useState","useAuth","addBook","useNavigate","jsxDEV","_jsxDEV","AddBook","_s","user","authHeader","navigate","book","setBook","title","author","description","loading","setLoading","error","setError","submit","e","preventDefault","base64Credentials","replace","credentials","atob","email","password","split","userId","id","err","console","onSubmit","children","fileName","_jsxFileName","lineNumber","columnNumber","placeholder","onChange","target","value","_c","$RefreshReg$"],"sources":["C:/Users/Keshav Anand/Desktop/LibraryManagement-main/frontend/src/pages/admin/AddBook.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport { useAuth } from \"../../context/AuthContext\";\nimport { addBook } from \"../../api/books\";\nimport { useNavigate } from \"react-router-dom\";\n\nconst AddBook = () => {\n    const { user, authHeader } = useAuth();\n    const navigate = useNavigate();\n    const [book, setBook] = useState({\n        title: \"\",\n        author: \"\",\n        description: \"\",\n    });\n    const [loading, setLoading] = useState(false);\n    const [error, setError] = useState(\"\");\n\n    const submit = async (e) => {\n        e.preventDefault();\n        setLoading(true);\n        setError(\"\");\n\n        if (!user || !authHeader) {\n            setError(\"Please login to add books\");\n            setLoading(false);\n            return;\n        }\n\n        try {\n            // Extract email and password from authHeader\n            const base64Credentials = authHeader.replace(\"Basic \", \"\");\n            const credentials = atob(base64Credentials);\n            const [email, password] = credentials.split(\":\");\n\n            // Get user ID from user object (we need to store it during login)\n            const userId = user.id || user.userId;\n            if (!userId) {\n                setError(\"User ID not found. Please login again.\");\n                setLoading(false);\n                return;\n            }\n\n            await addBook(userId, book, email, password);\n            navigate(\"/admin\");\n        } catch (err) {\n            setError(\"Failed to add book. Please try again.\");\n            console.error(err);\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    return (\n        <form onSubmit={submit}>\n            <h2>Add Book</h2>\n            <input placeholder=\"Title\" onChange={e => setBook({...book, title:e.target.value})}/>\n            <input placeholder=\"Author\" onChange={e => setBook({...book, author:e.target.value})}/>\n            <textarea placeholder=\"Description\" onChange={e => setBook({...book, description:e.target.value})}/>\n            <button>Add</button>\n        </form>\n    );\n};\n\nexport default AddBook;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}