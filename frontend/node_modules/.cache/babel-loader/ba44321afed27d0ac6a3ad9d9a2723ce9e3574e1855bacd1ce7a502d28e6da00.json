{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\hp\\\\OneDrive\\\\Desktop\\\\LibraryManagement\\\\frontend\\\\src\\\\components\\\\ProtectedRoute.js\",\n  _s = $RefreshSig$();\n// import { Navigate } from \"react-router-dom\";\n// import { useAuth } from \"../context/AuthContext\";\n\n// const ProtectedRoute = ({ children, role }) => {\n//     const { user } = useAuth();\n\n//     if (!user) {\n//         return <Navigate to=\"/login\" />;\n//     }\n\n//     if (role) {\n//         // ADMIN can access USER routes, but USER cannot access ADMIN routes\n//         if (role === \"USER\" && user.role === \"ADMIN\") {\n//             return children;\n//         }\n//         if (user.role !== role) {\n//             return <Navigate to=\"/\" />;\n//         }\n//     }\n\n//     return children;\n// };\n\n// export default ProtectedRoute;\n\nimport React from \"react\";\nimport { Navigate } from \"react-router-dom\";\nimport { useAuth } from \"../context/AuthContext\";\n\n/**\n * ProtectedRoute\n * - role: optional, \"ADMIN\" or \"USER\"\n * - only allows access if user is logged in and matches role\n */\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ProtectedRoute = ({\n  children,\n  role\n}) => {\n  _s();\n  const {\n    user,\n    loading\n  } = useAuth();\n  if (loading) {\n    // Optional: render a spinner or nothing while loading auth\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 16\n    }, this);\n  }\n  if (!user) {\n    // Not logged in\n    return /*#__PURE__*/_jsxDEV(Navigate, {\n      to: \"/login\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 16\n    }, this);\n  }\n  if (role && user.role !== role) {\n    // User does not have required role\n    return /*#__PURE__*/_jsxDEV(Navigate, {\n      to: \"/\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 16\n    }, this);\n  }\n\n  // Authorized\n  return children;\n};\n_s(ProtectedRoute, \"EmJkapf7qiLC5Br5eCoEq4veZes=\", false, function () {\n  return [useAuth];\n});\n_c = ProtectedRoute;\nexport default ProtectedRoute;\nvar _c;\n$RefreshReg$(_c, \"ProtectedRoute\");","map":{"version":3,"names":["React","Navigate","useAuth","jsxDEV","_jsxDEV","ProtectedRoute","children","role","_s","user","loading","fileName","_jsxFileName","lineNumber","columnNumber","to","_c","$RefreshReg$"],"sources":["C:/Users/hp/OneDrive/Desktop/LibraryManagement/frontend/src/components/ProtectedRoute.js"],"sourcesContent":["// import { Navigate } from \"react-router-dom\";\n// import { useAuth } from \"../context/AuthContext\";\n\n// const ProtectedRoute = ({ children, role }) => {\n//     const { user } = useAuth();\n\n//     if (!user) {\n//         return <Navigate to=\"/login\" />;\n//     }\n\n//     if (role) {\n//         // ADMIN can access USER routes, but USER cannot access ADMIN routes\n//         if (role === \"USER\" && user.role === \"ADMIN\") {\n//             return children;\n//         }\n//         if (user.role !== role) {\n//             return <Navigate to=\"/\" />;\n//         }\n//     }\n\n//     return children;\n// };\n\n// export default ProtectedRoute;\n\nimport React from \"react\";\nimport { Navigate } from \"react-router-dom\";\nimport { useAuth } from \"../context/AuthContext\";\n\n/**\n * ProtectedRoute\n * - role: optional, \"ADMIN\" or \"USER\"\n * - only allows access if user is logged in and matches role\n */\nconst ProtectedRoute = ({ children, role }) => {\n    const { user, loading } = useAuth();\n\n    if (loading) {\n        // Optional: render a spinner or nothing while loading auth\n        return <div>Loading...</div>;\n    }\n\n    if (!user) {\n        // Not logged in\n        return <Navigate to=\"/login\" />;\n    }\n\n    if (role && user.role !== role) {\n        // User does not have required role\n        return <Navigate to=\"/\" />;\n    }\n\n    // Authorized\n    return children;\n};\n\nexport default ProtectedRoute;\n"],"mappings":";;AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,QAAQ,QAAQ,kBAAkB;AAC3C,SAASC,OAAO,QAAQ,wBAAwB;;AAEhD;AACA;AACA;AACA;AACA;AAJA,SAAAC,MAAA,IAAAC,OAAA;AAKA,MAAMC,cAAc,GAAGA,CAAC;EAAEC,QAAQ;EAAEC;AAAK,CAAC,KAAK;EAAAC,EAAA;EAC3C,MAAM;IAAEC,IAAI;IAAEC;EAAQ,CAAC,GAAGR,OAAO,CAAC,CAAC;EAEnC,IAAIQ,OAAO,EAAE;IACT;IACA,oBAAON,OAAA;MAAAE,QAAA,EAAK;IAAU;MAAAK,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAK,CAAC;EAChC;EAEA,IAAI,CAACL,IAAI,EAAE;IACP;IACA,oBAAOL,OAAA,CAACH,QAAQ;MAACc,EAAE,EAAC;IAAQ;MAAAJ,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC;EACnC;EAEA,IAAIP,IAAI,IAAIE,IAAI,CAACF,IAAI,KAAKA,IAAI,EAAE;IAC5B;IACA,oBAAOH,OAAA,CAACH,QAAQ;MAACc,EAAE,EAAC;IAAG;MAAAJ,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC;EAC9B;;EAEA;EACA,OAAOR,QAAQ;AACnB,CAAC;AAACE,EAAA,CApBIH,cAAc;EAAA,QACUH,OAAO;AAAA;AAAAc,EAAA,GAD/BX,cAAc;AAsBpB,eAAeA,cAAc;AAAC,IAAAW,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}