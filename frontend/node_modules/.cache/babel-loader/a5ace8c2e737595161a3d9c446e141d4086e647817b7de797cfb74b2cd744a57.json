{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Keshav Anand\\\\Desktop\\\\LibraryManagement-main\\\\frontend\\\\src\\\\pages\\\\admin\\\\AdminBookList.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { useAuth } from \"../../context/AuthContext\";\nimport { getAdminBooks, deleteBook } from \"../../api/books\";\nimport BookCard from \"../../components/BookCard\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AdminBookList = () => {\n  _s();\n  const {\n    user,\n    authHeader\n  } = useAuth();\n  const navigate = useNavigate();\n  const [books, setBooks] = useState([]);\n  const [loading, setLoading] = useState(true);\n  useEffect(() => {\n    fetchMyBooks();\n  }, [user, authHeader]);\n  const fetchMyBooks = async () => {\n    if (!user || !authHeader) {\n      setLoading(false);\n      return;\n    }\n    try {\n      const base64Credentials = authHeader.replace(\"Basic \", \"\");\n      const credentials = atob(base64Credentials);\n      const [email, password] = credentials.split(\":\");\n      const userId = user.id;\n      if (!userId) {\n        setLoading(false);\n        return;\n      }\n      const data = await getAdminBooks(userId, email, password);\n      setBooks(data);\n    } catch (err) {\n      console.error(\"Error fetching books\", err);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleDelete = async bookId => {\n    if (!window.confirm(\"Are you sure you want to delete this book?\")) return;\n    if (!user || !authHeader) {\n      alert(\"Please login to delete books\");\n      return;\n    }\n    try {\n      const base64Credentials = authHeader.replace(\"Basic \", \"\");\n      const credentials = atob(base64Credentials);\n      const [email, password] = credentials.split(\":\");\n      const userId = user.id;\n      await deleteBook(bookId, userId, email, password);\n      setBooks(books.filter(b => b.id !== bookId));\n    } catch (err) {\n      alert(\"Delete failed\");\n      console.error(err);\n    }\n  };\n  if (loading) return /*#__PURE__*/_jsxDEV(\"p\", {\n    style: {\n      textAlign: \"center\"\n    },\n    children: \"Loading...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 66,\n    columnNumber: 25\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: styles.container,\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      style: styles.heading,\n      children: \"\\uD83D\\uDCDA My Books\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: styles.grid,\n      children: books.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"No books added yet\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 21\n      }, this) : books.map(book => /*#__PURE__*/_jsxDEV(BookCard, {\n        book: book,\n        isAdmin: true,\n        onEdit: () => navigate(`/admin/edit/${book.id}`),\n        onDelete: () => handleDelete(book.id)\n      }, book.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 25\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 69,\n    columnNumber: 9\n  }, this);\n};\n_s(AdminBookList, \"9cJd5lMRK5MMIZC6hXq7ihhqbWE=\", false, function () {\n  return [useAuth, useNavigate];\n});\n_c = AdminBookList;\nconst styles = {\n  container: {\n    padding: \"40px\",\n    minHeight: \"100vh\",\n    background: \"#f4f6fb\",\n    cursor: \"url('/pen-cursor.png'), auto\"\n  },\n  heading: {\n    textAlign: \"center\",\n    marginBottom: \"30px\"\n  },\n  grid: {\n    display: \"grid\",\n    gridTemplateColumns: \"repeat(auto-fill, minmax(260px, 1fr))\",\n    gap: \"20px\"\n  }\n};\nexport default AdminBookList;\nvar _c;\n$RefreshReg$(_c, \"AdminBookList\");","map":{"version":3,"names":["React","useEffect","useState","useNavigate","useAuth","getAdminBooks","deleteBook","BookCard","jsxDEV","_jsxDEV","AdminBookList","_s","user","authHeader","navigate","books","setBooks","loading","setLoading","fetchMyBooks","base64Credentials","replace","credentials","atob","email","password","split","userId","id","data","err","console","error","handleDelete","bookId","window","confirm","alert","filter","b","style","textAlign","children","fileName","_jsxFileName","lineNumber","columnNumber","styles","container","heading","grid","length","map","book","isAdmin","onEdit","onDelete","_c","padding","minHeight","background","cursor","marginBottom","display","gridTemplateColumns","gap","$RefreshReg$"],"sources":["C:/Users/Keshav Anand/Desktop/LibraryManagement-main/frontend/src/pages/admin/AdminBookList.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { useAuth } from \"../../context/AuthContext\";\nimport { getAdminBooks, deleteBook } from \"../../api/books\";\nimport BookCard from \"../../components/BookCard\";\n\nconst AdminBookList = () => {\n    const { user, authHeader } = useAuth();\n    const navigate = useNavigate();\n\n    const [books, setBooks] = useState([]);\n    const [loading, setLoading] = useState(true);\n\n    useEffect(() => {\n        fetchMyBooks();\n    }, [user, authHeader]);\n\n    const fetchMyBooks = async () => {\n        if (!user || !authHeader) {\n            setLoading(false);\n            return;\n        }\n\n        try {\n            const base64Credentials = authHeader.replace(\"Basic \", \"\");\n            const credentials = atob(base64Credentials);\n            const [email, password] = credentials.split(\":\");\n\n            const userId = user.id;\n            if (!userId) {\n                setLoading(false);\n                return;\n            }\n\n            const data = await getAdminBooks(userId, email, password);\n            setBooks(data);\n        } catch (err) {\n            console.error(\"Error fetching books\", err);\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    const handleDelete = async (bookId) => {\n        if (!window.confirm(\"Are you sure you want to delete this book?\")) return;\n\n        if (!user || !authHeader) {\n            alert(\"Please login to delete books\");\n            return;\n        }\n\n        try {\n            const base64Credentials = authHeader.replace(\"Basic \", \"\");\n            const credentials = atob(base64Credentials);\n            const [email, password] = credentials.split(\":\");\n\n            const userId = user.id;\n            await deleteBook(bookId, userId, email, password);\n            setBooks(books.filter((b) => b.id !== bookId));\n        } catch (err) {\n            alert(\"Delete failed\");\n            console.error(err);\n        }\n    };\n\n    if (loading) return <p style={{ textAlign: \"center\" }}>Loading...</p>;\n\n    return (\n        <div style={styles.container}>\n            <h2 style={styles.heading}>ðŸ“š My Books</h2>\n\n            <div style={styles.grid}>\n                {books.length === 0 ? (\n                    <p>No books added yet</p>\n                ) : (\n                    books.map((book) => (\n                        <BookCard\n                            key={book.id}\n                            book={book}\n                            isAdmin\n                            onEdit={() => navigate(`/admin/edit/${book.id}`)}\n                            onDelete={() => handleDelete(book.id)}\n                        />\n                    ))\n                )}\n            </div>\n        </div>\n    );\n};\n\nconst styles = {\n    container: {\n        padding: \"40px\",\n        minHeight: \"100vh\",\n        background: \"#f4f6fb\",\n        cursor: \"url('/pen-cursor.png'), auto\",\n    },\n    heading: {\n        textAlign: \"center\",\n        marginBottom: \"30px\",\n    },\n    grid: {\n        display: \"grid\",\n        gridTemplateColumns: \"repeat(auto-fill, minmax(260px, 1fr))\",\n        gap: \"20px\",\n    },\n};\n\nexport default AdminBookList;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}